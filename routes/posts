const express = require("express");

const { body } = require("express-validator/check");

const postsController = require("../controllers/posts");

const router = express.Router();

// Posts Routes

router.get("/posts", postsController.getPosts);

router.get("/post/:postId", postsController.getPost);

router.post(
  "/posts",
  [
    body("title").trim().isLength({ min: 5 }),
    body("content").trim().isLength({ min: 5 }),
  ],
  postsController.addPosts
);

router.delete("/post/:postId", postsController.deletePost);

router.put(
  "/post/:postId",
  [
    body("title").trim().isLength({ min: 5 }),
    body("content").trim().isLength({ min: 5 }),
  ],
  postsController.updatePost
);

// Comments Routes
router.get("/comment/:commentId", postsController.getComment);

router.get("/commentForPost/:postId", postsController.getComments);

router.post(
  "/comment/:postId",
  [body("content").trim().isLength({ min: 5 })],
  postsController.postComment
);

router.delete("/comment/:commentId", postsController.deleteComment);

router.put(
  "/comment/:commentId",
  [body("content").trim().isLength({ min: 5 })],
  postsController.updateComment
);

// Reply Routes
router.post(
  "/reply/:commentId",
  [body("content").trim().isLength({ min: 5 })],
  postsController.postReply
);

// Categories Routes
router.get("/category/:categoryId", postsController.getCategory);

router.get("/category", postsController.getCategories);

router.post(
  "/category",
  [body("content").trim().isLength({ min: 5 })],
  postsController.postCategory
);

router.delete("/category/:categoryId", postsController.deleteCategory);

// Tags Routes
router.get("/tag/:tagId", postsController.getTag);

router.get("/tag", postsController.getTags);

router.post(
  "/tag",
  [body("content").trim().isLength({ min: 5 })],
  postsController.postTag
);

router.put("/tag/:tagId", [body("content").trim()], postsController.updateTag);

router.delete("/tag/:tagId", postsController.deleteTag);

module.exports = router;
